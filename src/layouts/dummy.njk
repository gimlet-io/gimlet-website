<pre class="language-py"><code class="language-py"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello Tiltfile'</span><span class="token punctuation">)</span><br><br><span class="token comment"># Tell Tilt what YAML to deploy</span><br>k8s_yaml<span class="token punctuation">(</span><span class="token string">'app.yaml'</span><span class="token punctuation">)</span><br><br><span class="token comment"># Tell Tilt to create a port forward for a k8s resource</span><br>k8s_resource<span class="token punctuation">(</span><span class="token string">'frontend'</span><span class="token punctuation">,</span> port_forwards<span class="token operator">=</span><span class="token number">8080</span><span class="token punctuation">)</span></code></pre>
<pre class="language-diff"><code class="language-diff">print('Hello Tiltfile')<br><br># Tell Tilt what YAML to deploy<br>k8s_yaml('app.yaml')<br><br><span class="token inserted-sign inserted">+ # Tell Tilt what images to build from which directories<br>+ docker_build('companyname/app', 'app')<br></span><br># Tell Tilt to create a port forward for a k8s resource<br>k8s_resource('frontend', port_forwards=8080)</code></pre>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">envs</span><span class="token punctuation">:</span><br>  <span class="token key atrule">production</span><span class="token punctuation">:</span><br>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pytorch<span class="token punctuation">-</span>api<br>      <span class="token key atrule">strategy</span><span class="token punctuation">:</span> simple<br>      <span class="token key atrule">trigger</span><span class="token punctuation">:</span> .<span class="token important">*/docker-image-build</span><br>      <span class="token key atrule">namespace</span><span class="token punctuation">:</span> models<br>      <span class="token key atrule">image</span><span class="token punctuation">:</span> mycompany/pytorch<span class="token punctuation">-</span>api<br>      <span class="token key atrule">tag</span><span class="token punctuation">:</span> <span class="token string">'${COMMIT_SHA:0:8}'</span><br>      <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token string">'80'</span><br>      <span class="token key atrule">securedIngress</span><span class="token punctuation">:</span><br>        <span class="token key atrule">subdomain</span><span class="token punctuation">:</span> pytorch<span class="token punctuation">-</span>api<br>      <span class="token key atrule">requests</span><span class="token punctuation">:</span><br>        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 500m<br>        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1000Mi<br>      <span class="token key atrule">limits</span><span class="token punctuation">:</span><br>        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token number">4</span><br>        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1500Mi<br>      <span class="token key atrule">vars</span><span class="token punctuation">:</span><br>        <span class="token key atrule">MODEL_ID</span><span class="token punctuation">:</span> xxx<br>        <span class="token key atrule">MODEL_VERSION</span><span class="token punctuation">:</span> <span class="token number">2</span><br>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pytorch<span class="token punctuation">-</span>api<span class="token punctuation">-</span><span class="token number">2</span><br>      <span class="token key atrule">strategy</span><span class="token punctuation">:</span> simple<br>      <span class="token key atrule">trigger</span><span class="token punctuation">:</span> .<span class="token important">*/docker-image-build</span><br>      <span class="token key atrule">namespace</span><span class="token punctuation">:</span> models<br>      <span class="token key atrule">image</span><span class="token punctuation">:</span> mycompany/pytorch<span class="token punctuation">-</span>api<br>      <span class="token key atrule">tag</span><span class="token punctuation">:</span> <span class="token string">'${COMMIT_SHA:0:8}'</span><br>      <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token string">'80'</span><br>      <span class="token key atrule">securedIngress</span><span class="token punctuation">:</span><br>        <span class="token key atrule">subdomain</span><span class="token punctuation">:</span> pytorch<span class="token punctuation">-</span>api<span class="token punctuation">-</span><span class="token number">2</span><br>      <span class="token key atrule">requests</span><span class="token punctuation">:</span><br>        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 500m<br>        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1000Mi<br>      <span class="token key atrule">limits</span><span class="token punctuation">:</span><br>        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token number">4</span><br>        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1500Mi<br>      <span class="token key atrule">vars</span><span class="token punctuation">:</span><br>        <span class="token key atrule">MODEL_ID</span><span class="token punctuation">:</span> yyy<br>        <span class="token key atrule">MODEL_VERSION</span><span class="token punctuation">:</span> <span class="token number">4</span></code></pre>